---
title: NexT文章随机背景图
mathjax: true
keywords: 'NexT, 头图, 背景, 图片, 半透明, 随机, Hexo'
abbrlink: 21879
categories:
  - Others
date: 2019-03-30 12:52:52
updated: 2019-03-30 15:30:52
tags:
---


**摘要**

NexT主题做为Hexo博客中相当受欢迎的主题之一，得益于它简洁精致的外观，丰富多样的设置。不过相比与动态博客而言仍然少了许多重量级的功能。之前笔者介绍了Hexo文章加密的配置方法，今天作者来介绍Hexo博客随机背景头图的设置方法


<!--more-->

# 效果

![p1](https://hexo-source-1257756441.cos.ap-chengdu.myqcloud.com/2019/03/30/1316.png)

![p2](https://hexo-source-1257756441.cos.ap-chengdu.myqcloud.com/2019/03/30/1312.png)

鉴于笔者并没有完全弄懂NexT主题的layout，因此作者的思路仍然是通过运行js的方式来生成随机背景

# 添加js文件

大致思路是，先给出一个静态的图片链接列表，然后用js生成随机数，然后把这个下标对应的图片用getElementsByClassName方法给对应的标签的背景图片添加属性。js代码如下

```js
var imgArr=[
	"https://.../001.png",
	"https://.../002.png",
	"https://.../003.png",
	"https://.../004.png",
	"https://.../005.png",
	"https://.../006.png"
]; 
var task=document.getElementsByClassName("post-block");
for(var i=0;i<task.length;i++){
	var idx=parseInt(Math.random()*(imgArr.length));//生成随机数
	task[i].style.backgroundImage="url("+imgArr[idx]+")"; 
	task[i].style.backgroundPosition="top";//图片置顶部
	task[i].style.backgroundRepeat="no-repeat";//防止图片重复拼接
	task[i].style.backgroundSize="100%";
}
```

事实上笔者在调试js的时候没有直接把这个js文件部署上去，而是在油猴上新建脚本来调试，这样就方便了很多。最后要部署到博客上，请参考[Hexo博文加密](/2019/03/23/60222/)一文，使用类似添加js的方法即可

更好的随机方式是数组乱序，这样不容易在同一页面出现相同头图

```js
var imgArr=[
	"https://.../001.png",
	"https://.../002.png",
	"https://.../003.png",
	"https://.../004.png",
	"https://.../005.png",
	"https://.../006.png"
];
for (let i = 1; i < imgArr.length; i++) {//数组乱序
    const random = Math.floor(Math.random() * (i + 1));
    [imgArr[i], imgArr[random]] = [imgArr[random], imgArr[i]];
}
var task=document.getElementsByClassName("post-block");
for(var i=0;i<task.length;i++){
	//var idx=parseInt(Math.random()*(imgArr.length));
    var idx=i%imgArr.length;
	task[i].style.backgroundImage="url("+imgArr[idx]+")";
	task[i].style.backgroundPosition="top";
	task[i].style.backgroundRepeat="no-repeat";
	task[i].style.backgroundSize="100%";
}
```

两种js都可行

# 关于图片

为了防止标题看不清，笔者给图片加了一个半透明效果。而为了追求简洁性与速度，笔者并没有使用css遮罩来达到半透明背景图片的效果，而是直接使用PS在图片上做修改。而且使用PS的另一个好处就是可以自定义半透明的区域

当然，笔者使用linux系统，使用在线PS的网站进行图片的编辑。这里推荐一个：[photopea](https://www.photopea.com/).透明遮罩的方法自己百度啦

然后就可以用自己喜欢的图片来做头图啦～