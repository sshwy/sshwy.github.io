---
title: VIM 学习日志
categories:
  - Others
tags:
 - VIM
mathjax: true
abbrlink: 38355
date: 2018-11-08 12:50:00
updated: 2019-04-20 22:20:00
---

**摘要**

vim 大法好啊


<!--more-->

# Vim 插件安装

首先安装 Vundle，见 [Vundle-Github](https://github.com/VundleVim/Vundle.vim).

安装插件的时候，先在 vimrc 里面输入`Plugin 'XXX'`并保存，然后 vim 里运行`PluginInstall`即可

# Vim 代码折叠

VIM 代码折叠方式可以用"foldmethod"选项来设置，如：`set foldmethod=indent`

有 6 种方式来折叠代码

1. manual // 手工定义折叠
2. indent // 用缩进表示折叠
3. expr　 // 用表达式来定义折叠
4. syntax // 用语法高亮来定义折叠
5. diff   // 对没有更改的文本进行折叠
6. marker // 用标志折叠

常用命令：

1. zc 折叠
2. zC 对所在范围内所有嵌套的折叠点进行折叠
3. zo 展开折叠
4. zO 对所在范围内所有嵌套的折叠点展开

# VIM配置文件

```bash
set nocp " 不兼容模式
set nu
set cindent
set autoindent
set smartindent
set tabstop=4 " Tab 宽度为 4 个字符
set shiftwidth=4 " 自动缩进的时候，缩进尺寸为 4 个空格
set backspace=indent,eol,start 
" 设想这样一个情况：当前光标前面有若干字母，我们按下 i 键进入了 Insert 模式，然后输入了 3 个字母，再按 5 下删除(Backspace)。默认情况下，VIM 仅能删除我们新输入的 3 个字母，然后喇叭“嘟嘟”响两声。如果我们“set backspace=start”，则可以在删除了新输入的 3 个字母之后，继续向前删除原有的两个字符。 再设想一个情况：有若干行文字，我们把光标移到中间某一行的行首，按 i 键进入 Insert 模式，然后按一下 Backspace。默认情况下，喇叭会“嘟”一声，然后没有任何动静。如果我们“set backspace=eol”，则可以删除前一行行末的回车，也就是说将两行拼接起来。 当我们设置了自动缩进后，如果前一行缩进了一定距离，按下回车后，下一行也会保持相同的缩进。默认情况下，我们不能在 Insert 模式下直接按 Backspace 删除行首的缩进。如果我们“set backspace=indent”，则可以开启这一项功能。 上述三项功能，你可以根据自己的需要，选择其中一种或几种，用逗号分隔各个选项。建议把这三个选项都选上。

set encoding=utf-8 
set ambiwidth=double 
" 防止特殊符号无法正常显示。在 Unicode 中，许多来自不同语言的字符，如果字型足够近似的话，会把它们放在同一个编码中。但在不同编码中，字符的宽度是不一样的。例如中文汉语拼音中的 ā 就很宽，而欧洲语言中同样的字符就很窄。当 VIM 工作在 Unicode 状态时，遇到这些宽度不明的字符时，默认使用窄字符，这会导致中文的破折号“——”非常短，五角星“★”等符号只能显示一半。因此，我们需要设置 ambiwidth=double 来解决这个问题。

set whichwrap+=b,s,h,l,<,>,[,]
" 默认情况下，在 VIM 中当光标移到一行最左边的时候，我们继续按左键，光标不能回到上一行的最右边。同样地，光标到了一行最右边的时候，我们不能通过继续按右跳到下一行的最左边。但是，通过设置 whichwrap 我们可以对一部分按键开启这项功能。如果想对某一个或几个按键开启到头后自动折向下一行的功能，可以把需要开启的键的代号写到 whichwrap 的参数列表中，各个键之间使用逗号分隔。以下是 whichwrap 支持的按键名称列表：
"b |在 Normal 或 Visual 模式下按删除(Backspace)键。
"s |在 Normal 或 Visual 模式下按空格键。
"h |在 Normal 或 Visual 模式下按 h 键。
"l |在 Normal 或 Visual 模式下按 l 键。
"< |在 Normal 或 Visual 模式下按左方向键。
"> |在 Normal 或 Visual 模式下按右方向键。
"~ |在 Normal 模式下按 ~ 键(翻转当前字母大小写)。
"[ |在 Insert 或 Replace 模式下按左方向键。
"] |在 Insert 或 Replace 模式下按右方向键。

set et  " 编辑时将所有 Tab 替换为空格
set smarttab

set lbr 
"不在单词中间断行。设置了这个选项后，如果一行文字非常长，无法在一行内显示完的话，它会在单词与单词间的空白处断开，尽量不会把一个单词分成两截放在两个不同的行里。

set fo+=mB 
" 打开断行模块对亚洲语言支持。m 表示允许在两个汉字之间断行，即使汉字之间没有出现空格。B 表示将两行合并为一行的时候，汉字与汉字之间不要补空格。该命令支持的更多的选项请参看用户手册。

set selection=inclusive 
" 指定在选择文本时，光标所在位置也属于被选中的范围。如果指定 selection=exclusive 的话，可能会出现某些文本无法被选中的情况。

set wildmenu 
" 在命令模式下使用 Tab 自动补全的时候，将补全内容使用一个漂亮的单行菜单形式显示出来。

set fileencodings=ucs-bom,utf-8,cp936,gb18030,big5,euc-jp,euc-kr,latin1
" 设置编码的自动识别

imap jj <ESC>
imap <C-t><C-t> <C-R>=strftime("%Y-%m-%d %H:%M:%S")<CR>
nmap <F5> :!clear;g++ % -o %< -Wall <ESC>
nmap <F6> :!clear;time ./%< <ESC>
nmap <F7> :!clear;time ./%< < %<.in <ESC>
nmap <F8> :vsp %<.in <ESC>
nmap <F9> :!clear;gedit % <ESC>
nmap <C-g> gg"+yG <ESC>
vmap <C-c> "+y <ESC>
```

*以下为旧原文*

------

# 安装

## Windows

[vim- 官方网址](https://www.vim.org/)
[windows 稳定版 - 直接下载](ftp://ftp.vim.org/pub/vim/pc/gvim80-586.exe)

## linux

```
sudo apt install vim
```

或

```
yay -S vim
```

# 初级 LEVEL0

`:help <command>` | 显示相关命令的帮助。你也可以就输入 `:help` 而不跟命令。（退出帮助需要输入`:q`）
`:cd` | 修改当前操作目录
`:new` | 新建文件。新建后，记得使用：w 保存，否则直接关闭不会产生文件；
`:wq` | 存盘 + 退出 (`:w`存盘，`:q`退出）   （注：`:w `后可以跟文件名）

`i` | Insert-Mode，此时可插入文本，按`ESC`回到 Normal 模式。
`x` | 删当前光标所在的一个字符。
`dd` | 删除当前行，并把删除的行存到剪贴板里
`y` | 拷贝选中的文本
`yy` | 拷贝当前行
`p` | 粘贴剪贴板
`d` | 删除选中的文本，并把删除的文本存到剪贴板里
`dd` | 删除当前行，并把删除的行存到剪贴板里
`h` `j` `k` `l` | 使用其移动光标，你也可以使用光标键 (←↓↑→). 注：`j`就像下箭头。

# 启动 LEVEL1

`w` | 到下一个单词的开头。
`e` | 到下一个单词的结尾。
`%` | 匹配括号移动，包括 (, {, [. （陈皓注：你需要把光标先移到括号上）
`*` `#` | 匹配光标当前所在的单词，移动光标到下一个（或上一个）匹配单词（*是下一个，#是上一个）

`.` | （小数点） 可以重复上一次的命令
`N<command>` | 重复某个命令 N 次
`NG` `:N` | 到第 N 行（G 大写）
`v` | 可视化的选择

# 进阶 LEVEL2

**记住光标的移动，很多命令都可以和这些移动光标的命令连动。**
`<start position><command><end position>`

- 例如`0y$`命令意味着：
    i. `0` | 先到行头
    i. `y` | 从这里开始拷贝
    i. `$` | 拷贝到本行最后一个字符
- 你可可以输入 `ye`，从当前位置拷贝到本单词的最后一个字符。
- 你也可以输入 `y2/foo` 来拷贝 2 个 “foo” 之间的字符串。

# 光速 LEVEL3

## 在当前行上移动光标

`0` | 到行头
`^` | 到本行的第一个非 blank 字符
`$` | 到行尾
`g_` | 到本行最后一个不是 blank 字符的位置
`fa` | 到下一个为 a 的字符处，你也可以 fs 到下一个为 s 的字符
`t,` | 到逗号前的第一个字符。逗号可以变成其它字符
`Nfa` | 在当前行查找第 N 个出现的 a
`F` `T` | 和 `f` | `t` 一样，只不过是相反方向
`dt"` | 删除所有的内容，直到遇到双引号—— "

## 区域选择`<action>a<object>`或`<action>i<object>`

在**visual**模式下，这些命令很强大，其命令格式为
`<action>a<object>` 和 `<action>i<object>`

`<action>`可以是任何的命令，如 `d` （删除）, `y` （拷贝）, `v` （可以视模式选择）。
`<object>` 可能是：
- `w` 一个单词
- `W` 一个以空格为分隔的单词
- `s` 一个句字
- `p` 一个段落。
- 也可以是一个特别的字符："、 '、 )、 }、 ]。

假设你有一个字符串 (map (+) ("foo")). 而光标键在第一个 o 的位置。

 - `vi"` | 会选择 foo.
 - `va"` | 会选择 "foo".
 - `vi)` |会选择 "foo".
 - `va)` | 会选择 ("foo").
 - `v2i)` | 会选择 map (+) ("foo")
 - `v2a)` | 会选择 (map (+) ("foo"))

# 神犇 LEVEL4

## 块操作：<C-v>

块操作，典型的操作：`0 <C-v> <C-d> I-- [ESC]`

- `^` | 到行头
- `<C-v>` | 开始块操作
- `<C-d>` | 向下移动 （你也可以使用 hjkl 来移动光标，或是使用 %，或是别的）
- `I-- [ESC]` | I 是插入，插入“--”，按`ESC`键来为每一行生效。

在**Windows**下的 vim，你需要使用 `<C-q>` 而不是 `<C-v>` ，`<C-v>` 是拷贝剪贴板。

`<C-n>` 和 `<C-p>` | **自动补全**
在**Insert**模式下，你可以输入一个词的开头，然后按 <C-p>或是<C-n>，自动补齐功能就出现了…

### 可视化选择`v,V,<C-v>`

前面，我们看到了 <C-v>的示例 （在 Windows 下应该是<C-q>），我们可以使用 v 和 V。一但被选好了，你可以做下面的事：

J | 把所有的行连接起来（变成一行）
`<` `>` | 左右缩进
`=` | **自动给缩进（相当强大）**

在所有被选择的行后加上点东西：

- `<C-v>`
- 选中相关的行 （可使用 `j` 或 `<C-d>` 或是 `/pattern` 或是 `%` 等……)
- `$` 到行最后
- A, 输入字符串，按 ESC。

# 参考文献

https://blog.csdn.net/sumword_/article/details/53011463
