---
title: C++程序对拍
categories:
  - 程序语言
abbrlink: 34607
date: 2018-11-07 13:47:00
updated: 2018-11-07 13:47:00
---
## 前置技能

- API函数`system()`，包含于头文件`<cstdlib>`
- CMD中的`fc`命令或shell中的`diff`
- 管道IO（即 `<` 和 `>` 操作符）

<!--more-->

## 对拍模板

```cpp
#include<cstdio>
#include<ctime>
#include<cstdlib>
using namespace std;

int main(){
    system("g++ cake_gen.cpp -o .gen");
    system("g++ cake2.cpp -o .vio");
    system("g++ cake3.cpp -o .my");
    int t=0;
    while(++t){
        system("./.gen > .in");//生成数据
        system("./.vio < .in > .ansout");
        double s=clock();//ms为单位
        system("./.my < .in >.outout");
        double e=clock();
        if(system("diff .outout .ansout"))break;
        else if(e-s>1000)printf("TLE #%d %lf\n",t,e-s);
        else printf("AC #%d %lf\n",t,e-s);
    }
    printf("WA #%d",t);
    return 0;
}

```

注：产生的以英文句点开头的文件在linux下是隐藏的