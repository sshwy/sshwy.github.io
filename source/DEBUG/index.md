---
title: Debug
comments: false
date: 2019-03-04 16:10:23
keywords: Debug 
description: Debug
---

This page is similar to TopArc, but not at all.

This is use for DEBUG.

We use it to kill the dead links and correct the title of leancloud visitor's data.

The basic thing we do is compare the sitemap file with all the links in the leancloud's object. If a link does not exist in the file, we'll set that link's visitors count to 0. Then we can simply find the object by leancloud console and delete it.

To properly run the script, makesure the var of sitmap is latest.

<div id="debug"></div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script>AV.initialize("264TIQDwmMrw50ALoeJcgS16-gzGzoHsz", "hXqT5xIIBtn8JWo8AkTWu07F");</script>
<script type="text/javascript">

var sitemap="/DEBUG/index.html /2019/03/17/29376/ /top/index.html /links/index.html /about/index.html /2018/10/06/4586/ /2019/03/07/2120/ /2019GOAL/index.html /2019/03/07/46704/ /2019/03/05/63675/ /2018/12/07/53684/ /2018/12/13/52500/ /2019/03/02/10283/ /2019/03/02/39156/ /2019/02/16/24205/ /2019/02/15/61248/ /2019/02/15/23120/ /2019/02/14/25363/ /2019/02/14/33699/ /2019/02/13/57182/ /2018/10/01/36750/ /2019/02/12/34419/ /2018/10/01/35921/ /2019/02/11/55550/ /2018/10/01/21109/ /2019/02/04/42320/ /2019/01/26/19251/ /2019/01/26/52170/ /2019/01/25/15620/ /2019/01/25/20240/ /2019/01/24/38662/ /2019/01/24/30281/ /2019/01/24/36729/ /2019/01/23/1858/ /2019/01/22/45659/ /2019/01/20/10192/ /2019/01/19/3859/ /2019/01/21/18425/ /2018/12/21/2855/ /2019/01/18/38532/ /2019/01/18/6856/ /2019/01/18/32018/ /2019/01/17/15191/ /2018/12/19/51231/ /2019/01/17/60019/ /2019/01/17/42456/ /2019/01/17/25810/ /2019/01/16/61952/ /2019/01/16/8919/ /2019/01/16/59870/ /2019/01/16/32240/ /2019/01/15/62601/ /2019/01/15/52740/ /2019/01/15/37525/ /2018/12/21/45097/ /2019/01/14/43012/ /2019/01/14/31242/ /2019/01/14/15208/ /2019/01/14/15878/ /2019/01/14/49485/ /2019/01/12/28968/ /2019/01/11/5071/ /2019/01/10/5040/ /2019/01/05/34904/ /2018/12/31/30303/ /2018/12/30/42654/ /2018/12/21/53520/ /2018/12/21/20810/ /2018/12/21/12482/ /2018/12/21/226/ /2018/12/19/6220/ /2018/12/19/34596/ /2018/12/19/33863/ /2018/12/19/9827/ /2018/12/19/64483/ /2018/12/19/54163/ /2018/12/17/62199/ /2018/12/15/37415/ /2018/12/13/49363/ /2018/12/13/52956/ /2018/12/08/18862/ /2018/12/06/23395/ /2018/12/05/726/ /2018/12/05/60042/ /2018/12/04/13485/ /2018/11/29/11475/ /2018/11/29/63554/ /2018/11/26/4637/ /2018/11/25/45209/ /HTML_TABLE_GEN/index.html /2018/11/24/10392/ /2018/11/24/28462/ /2018/11/22/32916/ /2018/11/22/65430/ /categories/index.html /tags/index.html /2018/11/18/51003/ /2018/11/18/11336/ /2018/11/17/14225/ /2018/11/17/31903/ /2018/11/16/55226/ /2018/11/16/27265/ /2018/11/16/55387/ /2018/11/16/13990/ /2018/11/09/628/ /2018/11/08/39777/ /2018/11/08/12363/ /2018/11/08/15176/ /2018/11/08/24178/ /2018/11/08/38355/ /2018/11/07/29897/ /2018/11/07/8769/ /2018/11/07/34607/ /2018/11/07/43076/ /2018/11/02/38548/ /2018/10/26/40134/ /2018/10/18/8620/ /2018/10/17/55719/ /2018/10/13/13169/ /2018/10/12/27315/ /2018/10/05/17103/ /2018/10/04/9978/ /2018/10/04/51508/ /2018/10/03/44414/ /2018/10/03/60626/ /2018/10/02/56537/ /2018/10/01/44813/ /2018/10/01/14532/ /2018/10/01/15353/ /2018/10/01/15190/ /2018/10/01/35848/ /2018/10/01/33324/ /2018/10/01/27017/ /2018/10/01/12692/ /2018/10/01/4237/ /2018/10/01/7710/ /2018/10/01/2308/ /2018/10/01/40304/ /2018/10/01/39261/ /2018/10/01/30231/ /2018/10/01/25019/ /2018/10/01/8951/ /2018/10/01/46463/ /2018/10/01/12755/ /2018/10/01/27282/ /2018/10/01/36782/ /2018/10/01/45139/ /2018/10/01/5147/ /2018/10/01/45138/ /2018/10/01/33765/ /2018/10/01/51495/ /2018/10/01/59440/ /2018/10/01/2122/ /2018/10/01/418/ /2018/10/01/3214/ /2018/10/01/1847/ /2018/10/01/55406/ /2018/10/01/35224/ /2018/10/01/21576/ /2018/10/01/17473/ /2018/10/01/58498/ /2018/10/01/53862/ /2018/10/01/43822/ /2018/10/01/34991/ /2018/10/01/19925/ /2018/10/01/29858/ /2018/09/30/13772/ /2018/12/06/59112/";

var time=0
var title=""
var url=""
var id=""

var query = new AV.Query('Counter');
query.notEqualTo('id',0);
query.descending('time');
query.limit(1000);
query.find().then(function (todo) {
	for (var i=0;i<todo.length-1;i++){
		var result=todo[i].attributes;
		time=result.time;
		title=result.title;
		url=result.url;
		id=todo[i].id;
		var content="<a href='"+url+"'>"+title+"</a><br /><font color='#555'>"+"阅读次数："+time+"</font><br />";
		document.getElementById("debug").innerHTML+=content
		console.log(todo[i]);
		if(sitemap.indexOf(url) == -1){ // for links that dies
			console.log(todo[i]);
			query.get(id).then(function (it){
				console.log(it);
				console.log("clearing...");
				it.set('time',0);
				console.log("saving...");
				it.save();
				console.log("done.");
			},function(error){
				console.log("err");
			})
		}
	}
}, function (error) {
	console.log("error");
});

</script>

<style>.post-description { display: none; }</style>
